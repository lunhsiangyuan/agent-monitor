# Pixel Office Agent Monitor â€” è¨­è¨ˆæ–‡ä»¶

**æ—¥æœŸ**: 2026-02-25
**ç‹€æ…‹**: å·²æ‰¹å‡†
**éˆæ„Ÿä¾†æº**: [Pixel Agents VS Code Extension](https://marketplace.visualstudio.com/items?itemName=pablodelucca.pixel-agents)

## æ‘˜è¦

åœ¨ç¾æœ‰ Agent Teams Monitor Dashboardï¼ˆ`~/.claude/tools/agent-monitor/`ï¼‰åŠ å…¥åƒç´ é¢¨è¾¦å…¬å®¤å…¨æ™¯è¦–åœ–ã€‚æ¯å€‹ Agent ä»¥ 16Ã—24 åƒç´ è§’è‰²å‘ˆç¾ï¼Œæ ¹æ“šå³æ™‚ç‹€æ…‹ï¼ˆworking / sleeping / idle / goneï¼‰åšå°æ‡‰å‹•ç•«ã€‚Agent ä¹‹é–“çš„è¨Šæ¯ã€ä»»å‹™æŒ‡æ´¾ã€å®Œæˆç­‰äº‹ä»¶ä»¥è¦–è¦ºå‹•ç•«å‘ˆç¾ã€‚

## è¨­è¨ˆæ±ºç­–

| æ±ºç­– | é¸æ“‡ | ç†ç”± |
|------|------|------|
| ä½ˆå±€ | Office å…¨æ™¯å–ä»£ chat ç‚ºä¸»è¦–åœ–ï¼ŒChat é™ç‚º tab | è®“è§€å¯Ÿ agent è¡Œç‚ºæˆç‚ºä¸»è¦é«”é©— |
| æ¸²æŸ“å¼•æ“ | Canvas 2D game loop | è·Ÿ Pixel Agents ä¸€è‡´ï¼Œæ”¯æ´ Z æ·±åº¦ã€å¹³æ»‘å‹•ç•«ã€ç²’å­æ•ˆæœ |
| Sprite æ ¼å¼ | JSON hex[][] 16Ã—24 | è·Ÿ Pixel Agents ä¸€è‡´ï¼Œæ”¯æ´ palette swap + hue shift |
| æ¶æ§‹ | æ¨¡çµ„åŒ–éœæ…‹æª”æ¡ˆ | server.ts ç˜¦èº«ç‚º APIï¼Œå‰ç«¯æ‹†æˆ HTML/CSS/JS å¤šæª” |
| è¾¦å…¬å®¤ç’°å¢ƒ | è±å¯Œç‰ˆï¼ˆç™½æ¿ã€å’–å•¡æ©Ÿã€çª—æˆ¶ã€æ¤ç‰©ã€æ›¸æ¶ï¼‰ | è®“å ´æ™¯æœ‰ç”Ÿæ´»æ„Ÿ |
| äº’å‹•æ¨¡å‹ | æ´»åŠ›è¾¦å…¬å®¤ï¼ˆäº‹ä»¶å‹•ç•« + è¶£å‘³ idle + toast é€šçŸ¥ï¼‰ | è§€å¯Ÿæ™‚æœ‰è¶£å‘³æ€§ |

## æª”æ¡ˆçµæ§‹

```
agent-monitor/
â”œâ”€â”€ server.ts                 â† API routes + static serving + ç‹€æ…‹æ¨æ–·
â”œâ”€â”€ public/
â”‚   â”œâ”€â”€ index.html            â† éª¨æ¶ï¼šheader + sidebar + canvas + chat tab
â”‚   â”œâ”€â”€ css/
â”‚   â”‚   â”œâ”€â”€ base.css          â† æ·±è‰²ä¸»é¡Œ + sidebar + chatï¼ˆæå–è‡ª server.tsï¼‰
â”‚   â”‚   â””â”€â”€ ui-overlay.css    â† toast é€šçŸ¥ã€info cardã€tab åˆ‡æ›
â”‚   â””â”€â”€ js/
â”‚       â”œâ”€â”€ app.js            â† ä¸»æ§ï¼šWebSocketã€APIã€tab åˆ‡æ›ã€state store
â”‚       â”œâ”€â”€ engine/
â”‚       â”‚   â”œâ”€â”€ gameLoop.js   â† requestAnimationFrame loop + update/render
â”‚       â”‚   â”œâ”€â”€ renderer.js   â† Canvas ç¹ªè£½ + Z-Y æ’åº + DPR ç¸®æ”¾
â”‚       â”‚   â””â”€â”€ pathfinding.jsâ† BFS å°‹è·¯
â”‚       â”œâ”€â”€ sprites/
â”‚       â”‚   â”œâ”€â”€ characters.js â† 16Ã—24 è§’è‰² sprite data + 6 palette + hue shift
â”‚       â”‚   â”œâ”€â”€ furniture.js  â† æ¡Œæ¤…ã€æ›¸æ¶ã€æ¤ç‰©ã€å’–å•¡æ©Ÿã€ç™½æ¿ sprite data
â”‚       â”‚   â””â”€â”€ floors.js     â† åœ°æ¿ç“·ç£š + colorize ç³»çµ±
â”‚       â”œâ”€â”€ office/
â”‚       â”‚   â”œâ”€â”€ layout.js     â† æ ¹æ“š team æˆå“¡æ•¸è‡ªå‹•ç”Ÿæˆè¾¦å…¬å®¤ä½ˆå±€
â”‚       â”‚   â”œâ”€â”€ characters.js â† è§’è‰²ç‹€æ…‹æ©Ÿ + å‹•ç•«æ§åˆ¶å™¨
â”‚       â”‚   â””â”€â”€ effects.js    â† ä¿¡å°é£›è¡Œã€æ˜Ÿæ˜Ÿç²’å­ã€Zzzã€speech bubble
â”‚       â”œâ”€â”€ chat.js           â† åŸæœ‰ chat æ¸²æŸ“ï¼ˆæå–è‡ª server.tsï¼‰
â”‚       â””â”€â”€ notifications.js  â† toast é€šçŸ¥ç³»çµ±ï¼ˆHTML overlayï¼‰
```

## æ•¸æ“šæµ

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ~/.claude/teams/    â”‚â”€â”€â”
â”‚ ~/.claude/tasks/    â”‚â”€â”€â”¤ fs.watch (recursive)
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
                        â–¼
              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
              â”‚  server.ts   â”‚
              â”‚  API routes  â”‚â”€â”€ GET /api/teams/:name/statusï¼ˆæ–°ï¼‰
              â”‚  WebSocket   â”‚   â†’ å«æ¨æ–·çš„ agent ç‹€æ…‹
              â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
                     â”‚ ws: { type:'event', event:'message'|'task'|'status', ... }
                     â–¼
              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
              â”‚   app.js     â”‚
              â”‚  state store â”‚
              â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
                     â”‚
         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
         â–¼           â–¼           â–¼
   office engine   chat.js   notifications.js
   (canvas)        (HTML)    (HTML overlay)
```

### æ–° API

**`GET /api/teams/:name/status`**
å›å‚³æ¯å€‹ agent çš„æ¨æ–·ç‹€æ…‹ï¼š
```json
[{
  "agent": "researcher",
  "state": "working",
  "tool": "type",
  "task": "æ–‡ç»åˆ†æ",
  "lastMsg": "2min ago"
}]
```

### WebSocket å¢å¼·

æ–°å¢ event-level æ¨é€ï¼ˆé™¤ç¾æœ‰ `{ type: 'refresh' }` å¤–ï¼‰ï¼š
```json
{
  "type": "event",
  "team": "manuscript-team",
  "event": "message",
  "from": "researcher",
  "to": "writer",
  "summary": "æ–‡ç»åˆ†æå®Œæˆ"
}
```

## è§’è‰²ç³»çµ±

### Sprite è¦æ ¼
- **æ ¼å¼**ï¼š`string[][]` JSON åå…­é€²ä½è‰²é™£åˆ—
- **å°ºå¯¸**ï¼š16Ã—24 åƒç´ 
- **æ–¹å‘**ï¼šDOWNï¼ˆæ­£é¢ï¼‰ã€UPï¼ˆèƒŒé¢ï¼‰ã€RIGHTï¼ˆå´é¢ï¼‰ã€LEFTï¼ˆRIGHT é¡åƒï¼‰
- **å‹•ç•«å¹€**ï¼šwalk(4), type(2), read(2) per direction
- **è‡ªè£½æ–°å¢**ï¼šsleep(2), celebrate(3), coffee-walk(4)

### èª¿è‰²ç›¤ç³»çµ±
- 6 çµ„åŸºç¤èª¿è‰²ç›¤ï¼ˆskin / shirt / pants / hair / shoesï¼‰
- è¶…é 6 äººæ™‚ç”¨ hue shift 45Â°-315Â° è‡ªå‹•ç”Ÿæˆ
- èˆ‡ç¾æœ‰ `AGENT_PERSONA` mapping æ•´åˆï¼Œæ ¹æ“š agent name åˆ†é…

### ç‹€æ…‹æ©Ÿ

```
ç‹€æ…‹æ¨æ–·å„ªå…ˆåºï¼ˆserver ç«¯ï¼‰ï¼š
1. shutdown approved    â†’ GONEï¼ˆç©ºæ¡Œ + æ¤…å­ï¼‰
2. idle_notification    â†’ SLEEPINGï¼ˆè¶´æ¡Œ + Zzz ç²’å­ï¼‰
3. in_progress + msg<2m â†’ TYPINGï¼ˆæ•²éµç›¤å‹•ç•«ï¼‰
4. in_progress + no msg â†’ READINGï¼ˆçœ‹è¢å¹•å‹•ç•«ï¼‰
5. task blocked         â†’ COFFEEï¼ˆèµ°åˆ°å’–å•¡æ©Ÿï¼‰
6. default              â†’ IDLEï¼ˆéš¨æ©ŸéŠè•© / ç™¼å‘†ï¼‰
```

### è¶£å‘³ Idle è¡Œç‚ºï¼ˆå‰ç«¯éš¨æ©Ÿè§¸ç™¼ï¼‰
- IDLE > 30s â†’ FIDGETï¼ˆä¼¸æ‡¶è…° 1 ç§’ï¼Œå› IDLEï¼‰
- SLEEPING â†’ Zzz ç²’å­æŒçºŒæµ®å‡º
- 2+ IDLE agents > 60s â†’ CHATTINGï¼ˆèµ°åˆ°ä¸€èµ· + è¼ªæµ speech bubbleï¼‰
- blocked detected â†’ COFFEEï¼ˆèµ·èº«èµ°åˆ°å’–å•¡æ©Ÿ + ç«¯æ¯å›åº§ï¼‰

## è¾¦å…¬å®¤ç’°å¢ƒ

### ä½ˆå±€
- æ ¼å­ç³»çµ±ï¼š16Ã—16 px tiles
- æ ¹æ“š team æˆå“¡æ•¸ï¼ˆ2-8ï¼‰è‡ªå‹•æ’åˆ—è¾¦å…¬æ¡Œ
- ç‰†ä¸Šè£é£¾å›ºå®šï¼šç™½æ¿ã€çª—æˆ¶ï¼ˆå«å…‰ç·šæ•ˆæœï¼‰ã€æ™‚é˜ï¼ˆé¡¯ç¤ºçœŸå¯¦æ™‚é–“ï¼‰ã€æ›¸æ¶
- å’–å•¡æ©Ÿåœ¨ä¸‹æ–¹ä¸­å¤®ï¼ˆCOFFEE ç‹€æ…‹ç›®çš„åœ°ï¼‰
- æ¤ç‰©æ•£ä½ˆå„è§’
- ç©ºåœ°ä¾›è§’è‰²èµ°å‹• / é–’èŠ

### å®¶å…· Sprite
| å®¶å…· | å°ºå¯¸ | èªªæ˜ |
|------|------|------|
| è¾¦å…¬æ¡Œ | 32Ã—32 (2Ã—2 tiles) | æ¯äººä¸€å¼µ |
| æ¤…å­ | 16Ã—16 (1Ã—1 tile) | 8 å€‹æ–¹å‘ |
| PC è¢å¹• | 16Ã—16 | æ¡Œä¸Šï¼Œé¡¯ç¤ºä»»å‹™åç¸®å¯« |
| æ›¸æ¶ | 16Ã—32 | ç‰†å£è£é£¾ |
| æ¤ç‰© | 16Ã—24 | è§’è½è£é£¾ |
| å’–å•¡æ©Ÿ | 16Ã—24 | äº’å‹•å€ |
| ç™½æ¿ | 32Ã—16 | ç‰†å£è£é£¾ |
| çª—æˆ¶ | 32Ã—32 | ç‰†å£ï¼Œå«å…‰ç·š |
| æ™‚é˜ | 16Ã—16 | ç‰†å£ï¼Œé¡¯ç¤ºçœŸå¯¦æ™‚é–“ |

## äº’å‹•äº‹ä»¶å‹•ç•«

| äº‹ä»¶ | WebSocket è§¸ç™¼ | å‹•ç•«æ•ˆæœ |
|------|---------------|---------|
| è¨Šæ¯å‚³é€ | `event:message` | ä¿¡å° âœ‰ï¸ æ‹‹ç‰©ç·š Aâ†’B + B é ­ä¸Š ğŸ’¡ |
| ä»»å‹™å®Œæˆ | task `completed` | è§’è‰²èˆ‰æ‰‹ ğŸ‰ + æ˜Ÿæ˜Ÿç²’å­ |
| ä»»å‹™æŒ‡æ´¾ | task `owner` changed | å¡ç‰‡é£›åˆ°æ¡Œä¸Š + è§’è‰²è·³èµ· |
| Shutdown | `shutdown_request` | å…¨å ´ç´…é–ƒ + è§’è‰²æ”¶æ‹¾é›¢é–‹ |
| é–’èŠ | å‰ç«¯åµæ¸¬ 2+ IDLE | å…©äººèµ°åˆ°ä¸€èµ· + speech bubble |
| å–å’–å•¡ | blocked detected | èµ·èº«èµ°åˆ°å’–å•¡æ©Ÿ + ç«¯æ¯å›åº§ |

## UI Overlayï¼ˆHTML on Canvasï¼‰

- **Toast é€šçŸ¥**ï¼šå³ä¸Šè§’æ»‘å…¥ï¼Œ3 ç§’æ¶ˆå¤±ã€‚æ ¼å¼ï¼šã€Œâœ‰ï¸ researcher â†’ writer: æ–‡ç»å®Œæˆã€
- **é»æ“Šè§’è‰² Info Card**ï¼šåç¨±ã€ç‹€æ…‹ã€ç•¶å‰ä»»å‹™ã€æœ€å¾Œè¨Šæ¯ã€[View Chat] æŒ‰éˆ•
- **Tab åˆ‡æ›**ï¼š[ğŸ¢ Office] [ğŸ’¬ Chat] åœ¨ header æˆ– canvas ä¸‹æ–¹

## æŠ€è¡“ç´„æŸ

- **é›¶å¤–éƒ¨ä¾è³´**ï¼šä¸ç”¨ frameworkã€ä¸ç”¨ npm package
- **Bun åŸç”Ÿ static serving**ï¼š`Bun.serve({ static: { ... } })` æˆ–æ‰‹å‹•è·¯ç”±
- **å–®ä¸€é€²å…¥é»**ï¼šä»ç„¶ `bun run server.ts` å•Ÿå‹•
- **å‘å¾Œç›¸å®¹**ï¼šChat view ä¿æŒå®Œæ•´åŠŸèƒ½ï¼Œåªæ˜¯å¾é è¨­è®Šæˆ tab
